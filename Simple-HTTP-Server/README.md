# Simple-HTTP-Server
這是一個基於線程池的，簡單的Web Server專案實作。

## 編譯運行
`git clone https://github.com/Liu-huaian/Simple-HTTP-Server`
  `cd Simple-HTTP-Server/bin`
  `cmake ..`
  `make`
  `./main`
 
## 專案簡介
本專案基於Linux作業系統，使用C++語言實作了一個簡單的HTTP伺服器，支援使用者透過GET請求取得靜態資源和透過POST請求存取CGI。 為了達到高效能伺服器的要求，本專案主要採用了以下設計：
* 採用Proactor模式，主執行緒使用Epoll負責處理客戶端的連線請求、請求讀取和回應寫入，子執行緒負責邏輯業務的處理;
* 採用固定線程池，對HTTP請求進行並發處理；
* 採用有限狀態機對HTTP請求進行高效率解析;
* 採用多進程與管道，實現CGI請求；
* 設計非同步阻塞佇列，實現高效日誌系統。

## 參考書籍
《Linux高效能伺服器程式設計》遊雙 著
《C++伺服器開發精髓》張遠龍 著

## 小結與展望
本計畫是一個簡單的HTTP伺服器的實現，支援的功能較為有限，但很完善的幫助複習了Linux系統程式設計和網路程式設計的知識點。
結合Golang中的一些現有的Web框架，本項目存在以下不足，可以在未來進一步改進：
1. **本專案不支援路由管理。 ** 本專案對於HTTP請求處理邏輯較為簡單，根據請求類型（GET/POST）和url來判斷檔案是否存在，並執行對應的邏輯處理，並沒有專門的路由管理。 最簡單粗暴的路由設計是採用Hash
實作url和回呼處理函數之間的映射，根據url呼叫對應的處理函數，但這種路由並不是RESTful的，不支援動態路由。 後續將考慮引入**前綴樹**實現根據路由動態尋找回呼函數。
2. **本項目線程池固定。 ** 本專案採用固定執行緒池，預設執行緒數目為8，構成消費者-生產者模型。 然而，在實際業務邏輯處理中，仍然會存在大量的系統呼叫導致執行緒阻塞，例如檔案資訊的讀取、檔案內容讀取和
資料庫等操作，因此對於並發量特別大的場景會顯得非常吃力。 後序可以考慮引入動態執行緒池和協程，當執行緒進入系統呼叫時，呼叫新的執行緒和待處理協程結合，繼續進行邏輯業務處理。
3. **本項目CGI容易阻塞線程運行**本項目中，子線程在fork出CGI程序後，會通過管道傳遞給CGI程序必要的CGI信息，然後阻塞等待CGI程序處理數據並通過管道返回。 當有大量CGI請求時，不僅會消耗大量的資源，
而且線程池中的線程將因為持續等待管道通訊而阻塞，導致伺服器癱瘓。 後序考慮直接由CGI進程將處理訊息傳回給請求的客戶端。
4. **本項目不支援資源緩存。 ** 本專案中靜態資源的每個要求都需要重新讀取靜態文件，涉及系統調用，造成不必要的開銷。 後續考慮使用Redis作為快取資料庫，對高頻存取的靜態資源進行緩存，加快讀取速度。
# Simple-HTTP-Server
# Simple-HTTP-Server
# Simple-HTTP-Server
# HTTP
